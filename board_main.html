
<div id="board_app" class="board_container">

  <h1 class="board_title">{{this.title}}</h1>

  <div class="board_info">
      <span class="board_author">작성자: {{this.author}}</span>
      <span class="board_date">작성일: {{this.sysdate}}</span>
  </div>

  <div   v-html="content" div="board_main_content" class="board_content">
      
  </div>

  <div class="board_buttons">
      <a href="javascript:;" @click="fnHomeClick" class="board_btn board_btn-back">목록으로</a>
      <a href="javascript:;" @click="fnUpdateCilck" class="board_btn board_btn-edit">수정</a>
      <a href="javascript:;" @click="fnDeleteCilck" class="board_btn board_btn-delete">삭제</a>
  </div>
</div>
 


 <script type="text/javascript">

    dark_toggle();
    dark_toggle();

    //alert(board_id);

    async function useModule() {
        // let count = await window.module.countdata();

        let data = await window.module.getdata_p(board_id);
        return data;
    }

    async function useDelModule() {
        await window.module.deldata(board_id);
    }
    

    board_app = Vue.createApp({
        data() {
            return {
              author : '', // 로그인에 사용할 username
              title: '',  // 로그인에 사용할 password
              content : '',
              num     : '',
              sysdate : '',
              viewFlg : true ,
            };
        },
        methods: {
            // 함수(메소드)
            fnHomeClick : function (id) {
                pagemove("1;");
            },
            fnSample : async function () {
                try {
                var self =  this;
                var data = await useModule();
                  
                //console.log(data);

                self.author  = data.writer ;
                self.title   = data.title ;
                self.content = data.content;
                self.num     = data.num;
                self.sysdate = data.sysdate ;
                self.viewFlg = false;
                
                } catch (err) {
                    swal_msg("에러","게시판 불러오기 실패","error");
                    peagmove(";");
                }
            },
            fnUpdateCilck : function () {

                    Swal.fire({
                        title: '관리자 암호를 입력하세요..',
                        input: 'password',
                        inputPlaceholder: '암호 입력..'
                    }).then((data) => {

                        //console.log(data.value);
                        if ((data.value).indexOf("test1234") > -1 ){
                            pagemove("e;"+ board_id); 
                        } else {
                            swal_msg('암호 에러','관리자 암호를 다시 확인해주세요','error');
                        }
                    });
                
            },
            fnDeleteCilck : async function () {
                if(!(confirm("정말 삭제하시겠습니까?"))){
                    return;
                }

                Swal.fire({
                        title: '관리자 암호를 입력하세요..',
                        input: 'password',
                        inputPlaceholder: '암호 입력..'
                    }).then((data) => {

                        //console.log(data.value);
                        if ((data.value).indexOf("test1234") > -1 ){
                            useDelModule();
                        } else {
                            swal_msg('암호 에러','관리자 암호를 다시 확인해주세요','error');
                        }
                    });
                    


            },
        },
        mounted() {
            // 처음 시작할 때 실행되는 부분
            let self = this;
            self.fnSample();
        }
    });

    board_app.mount("#board_app");
    
</script>
